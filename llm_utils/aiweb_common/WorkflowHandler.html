<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://sites.uab.edu/periop-datascience/llm_utils/aiweb_common/WorkflowHandler.html" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Workflow Handler - Label Maker</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Workflow Handler";
        var mkdocs_page_input_path = "llm_utils/aiweb_common/WorkflowHandler.md";
        var mkdocs_page_url = "/periop-datascience/llm_utils/aiweb_common/WorkflowHandler.html";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../index.html" class="icon icon-home"> Label Maker
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../index.html">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Generative Categorizer</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" >Workflows</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/categorize_handler.html">Categorize</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/evaluate_handler.html">Evaluate</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/streamlit_interface.html">Streamlit</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Categorize</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/Categorize/categorizer.html">Categorizer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/Categorize/zeroshot.html">Zeroshot</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/Categorize/fewshot.html">Fewshot</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/Categorize/manyshot.html">Manyshot</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Evaluate</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/Evaluate/evaluator.html">Evaluator</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/Evaluate/confidence_intervals.html">Confidence Intervals</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/Evaluate/data_loader.html">Data Loader</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Utils</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/utils/category.html">Category</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/utils/class_balance.html">Class Balance</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/utils/file_manager.html">File Manager</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/utils/normalize_text.html">Normalize Text</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../LabeLMaker/utils/page_renderer.html">Page Renderer</a>
                </li>
    </ul>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">LabeLMaker_config</span></p>
              <ul>
                  <li class="toctree-l1"><a class="" href="../../LabeLMaker_Config/config.md">Config</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">llm_utils</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Fast API</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="fastapi/helper_apis.html">Helper APIS</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="fastapi/schemas.html">Schemas</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="fastapi/validators.html">Validators</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >File Operations</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="file_operations/docx_creator.html">Docx Creator</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="file_operations/file_config.html">File Config</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="file_operations/file_handling.html">File Handling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="file_operations/text_format.html">Text Format</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="file_operations/upload_manager.html">Upload Manager</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Resource</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="resource/default_resource_config.html">Default Resource Config</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="resource/NIHRePORTERInterface.html">NIH RePORTER Interface</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="resource/PubMedInterface.html">PubMed Interface</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="resource/PubMedQuery.html">PubMed Query</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Streamlit</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="streamlit/BYOKLogin.html">Bring Your Own Key (BYOK)</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="streamlit/streamlit_common.html">Streamlit Common</a>
                </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="ObjectFactory.html">Object Factory</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Workflow Handler</a>
    <ul class="current">
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" >Generate</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="generate/AugmentedResponse.html">AugmentedResponse</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/AugmentedServicer.html">AugmentedServicer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/ChatResponse.html">ChatResponse</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/ChatSchemas.html">ChatSchemas</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/ChatServicer.html">ChatServicer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/PromptAssembler.html">PromptAssembler</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/PromptyResponseHandler.html">PromptyResponse</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/PromptyServicer.html">PromptyServicer</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/QueryInterface.html">QueryInterface</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/Response.html">Response</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/SingleResponse.html">SingleResponse</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="generate/SingleResponseServicer.html">SingleResponseServicer</a>
                </li>
    </ul>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Label Maker</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html" class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">llm_utils</li>
      <li class="breadcrumb-item active">Workflow Handler</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/uabperiopai/edit/master/llm_utils/docs/aiweb_common/WorkflowHandler.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <div class="doc doc-object doc-module">



<a id="aiweb_common.WorkflowHandler"></a>
    <div class="doc doc-contents first">









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="aiweb_common.WorkflowHandler.WorkflowHandler" class="doc doc-heading">
            <code>WorkflowHandler</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="abc.ABC">ABC</span></code></p>








              <details class="quote">
                <summary>Source code in <code>llm_utils/aiweb_common/WorkflowHandler.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">WorkflowHandler</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_cost</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_filename</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># should not be forced. datafeasibility, for example, wouldn&#39;t use.</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_mime_type</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># should not be forced. datafeasibility, for example, wouldn&#39;t use.</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="nd">@abstractmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_update_total_cost</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">response_meta</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_cost</span> <span class="o">+=</span> <span class="n">response_meta</span><span class="o">.</span><span class="n">total_cost</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_get_db_connection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">db_server</span><span class="p">,</span> <span class="n">db_name</span><span class="p">,</span> <span class="n">db_user</span><span class="p">,</span> <span class="n">db_password</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The function `get_db_connection` creates a database connection using the provided server, database</span>
<span class="sd">        name, user, and password.</span>

<span class="sd">        Args:</span>
<span class="sd">        db_server: The `db_server` parameter refers to the server where the database is hosted. This could</span>
<span class="sd">        be an IP address or a domain name pointing to the server where the SQL Server instance is running.</span>
<span class="sd">        db_name: The `db_name` parameter in the `get_db_connection` function refers to the name of the</span>
<span class="sd">        database you want to connect to on the specified database server. This parameter is used to</span>
<span class="sd">        construct the connection string that includes information such as the database name, server details,</span>
<span class="sd">        user credentials, and driver information for</span>
<span class="sd">        db_user: The `db_user` parameter in the `get_db_connection` function refers to the username used</span>
<span class="sd">        to authenticate and access the database. It is typically associated with a specific user account</span>
<span class="sd">        that has the necessary permissions to interact with the database specified by `db_name` on the</span>
<span class="sd">        server `db_server`.</span>
<span class="sd">        db_password: It seems like you were about to provide information about the `db_password` parameter</span>
<span class="sd">        but the text got cut off. Could you please provide the details or let me know how I can assist you</span>
<span class="sd">        further with the `db_password` parameter?</span>

<span class="sd">        Returns:</span>
<span class="sd">        The function `get_db_connection` returns a connection object to a SQL Server database using the</span>
<span class="sd">        provided server, database name, user, and password details.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">conn_str</span> <span class="o">=</span> <span class="p">(</span>
            <span class="s2">&quot;DRIVER={ODBC Driver 17 for SQL Server};SERVER=&quot;</span>
            <span class="o">+</span> <span class="n">db_server</span>
            <span class="o">+</span> <span class="s2">&quot;;DATABASE=&quot;</span>
            <span class="o">+</span> <span class="n">db_name</span>
            <span class="o">+</span> <span class="s2">&quot;;UID=&quot;</span>
            <span class="o">+</span> <span class="n">db_user</span>
            <span class="o">+</span> <span class="s2">&quot;;PWD=&quot;</span>
            <span class="o">+</span> <span class="n">db_password</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">pyodbc</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">conn_str</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_write_to_db</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">app_config</span><span class="p">,</span>
        <span class="n">input_as_json</span><span class="p">,</span>
        <span class="n">submit_time</span><span class="p">,</span>
        <span class="n">response_time</span><span class="p">,</span>
        <span class="n">cost</span><span class="p">,</span>
        <span class="n">name_suffix</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The `write_to_db` function inserts data into a database table `api_interactions` with specified</span>
<span class="sd">        columns using the provided parameters.</span>

<span class="sd">        Args:</span>
<span class="sd">        app_config: The `app_config` parameter is a configuration object that contains information about</span>
<span class="sd">        the database server, database name, database user, and database password needed to establish a</span>
<span class="sd">        connection to the database. It likely contains attributes like `DB_SERVER`, `DB_NAME`, `DB_USER`,</span>
<span class="sd">        `DB_PASSWORD`, and `NAME</span>
<span class="sd">        input_as_json: The `input_as_json` parameter in the `write_to_db` function is expected to be a</span>
<span class="sd">        JSON object representing the user input data that you want to store in the database. This JSON</span>
<span class="sd">        object should be a serializable format that can be stored in a database column, typically a string</span>
<span class="sd">        representation of the</span>
<span class="sd">        submit_time: Submit time is the timestamp when the request was submitted to the API. It typically</span>
<span class="sd">        includes the date and time when the request was made.</span>
<span class="sd">        response_time: Response time is the time taken for the server to process a request and send a</span>
<span class="sd">        response back to the client. It is usually measured in milliseconds and indicates the efficiency of</span>
<span class="sd">        the system in handling requests.</span>
<span class="sd">        cost: The `cost` parameter in the `write_to_db` function represents the total cost associated with</span>
<span class="sd">        the API interaction being recorded in the database. This cost could be related to any expenses</span>
<span class="sd">        incurred during the interaction, such as processing fees, data storage costs, or any other relevant</span>
<span class="sd">        expenses. It is a numerical</span>
<span class="sd">        name_suffix: The `name_suffix` parameter in the `write_to_db` function is an optional parameter</span>
<span class="sd">        that allows you to append a suffix to the `app_name` field in the database. This can be useful if</span>
<span class="sd">        you need to differentiate between multiple instances of the same application in the database. If a</span>
<span class="sd">        `name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_db_connection</span><span class="p">(</span>
            <span class="n">db_server</span><span class="o">=</span><span class="n">app_config</span><span class="o">.</span><span class="n">DB_SERVER</span><span class="p">,</span>
            <span class="n">db_name</span><span class="o">=</span><span class="n">app_config</span><span class="o">.</span><span class="n">DB_NAME</span><span class="p">,</span>
            <span class="n">db_user</span><span class="o">=</span><span class="n">app_config</span><span class="o">.</span><span class="n">DB_USER</span><span class="p">,</span>
            <span class="n">db_password</span><span class="o">=</span><span class="n">app_config</span><span class="o">.</span><span class="n">DB_PASSWORD</span><span class="p">,</span>
        <span class="p">)</span> <span class="k">as</span> <span class="n">conn</span><span class="p">:</span>
            <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
            <span class="n">query</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">            INSERT INTO api_interactions (app_name, user_input, submit_time, response_time, total_cost)</span>
<span class="s2">            VALUES (?, ?, ?, ?, ?)</span>
<span class="s2">            &quot;&quot;&quot;</span>
            <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
                <span class="n">query</span><span class="p">,</span>
                <span class="p">(</span>
                    <span class="n">app_config</span><span class="o">.</span><span class="n">NAME</span> <span class="o">+</span> <span class="n">name_suffix</span><span class="p">,</span>
                    <span class="n">input_as_json</span><span class="p">,</span>
                    <span class="n">submit_time</span><span class="p">,</span>
                    <span class="n">response_time</span><span class="p">,</span>
                    <span class="n">cost</span><span class="p">,</span>
                <span class="p">),</span>
            <span class="p">)</span>
            <span class="n">conn</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">check_content_type</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">returned_content</span><span class="p">):</span>
        <span class="c1"># TODO: consider changing to if hasattr content</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">returned_content</span><span class="p">,</span> <span class="n">AIMessage</span><span class="p">):</span>
            <span class="n">extracted_content</span> <span class="o">=</span> <span class="n">returned_content</span><span class="o">.</span><span class="n">content</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">returned_content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">extracted_content</span> <span class="o">=</span> <span class="n">returned_content</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span>
                <span class="s2">&quot;Content not of type AIMessage or str. Check what invoke is returning. Langchain interfaces are inconsistent per API provider.&quot;</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">extracted_content</span>

    <span class="c1"># TODO is there a way to make this cleaner since self.promtpy_path and self._validate are only called in grandchildren</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">load_prompty</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># self.prompty_path initialized by child</span>
        <span class="c1"># This should likely be broken up more with to isolate functionality further</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">prompty_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Prompty file not found at: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">prompty_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">prompty_path</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">prompty_content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">prompty_data</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">yaml</span><span class="o">.</span><span class="n">safe_load_all</span><span class="p">(</span><span class="n">prompty_content</span><span class="p">))</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">prompty_data</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">prompty_data</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Invalid prompty file format.&quot;</span><span class="p">)</span>
        <span class="n">prompt_section</span> <span class="o">=</span> <span class="n">prompty_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">prompt_template</span> <span class="o">=</span> <span class="n">prompt_section</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;prompt&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;template&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">prompt_template</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Prompt template not found in prompty file.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_validate_prompt_template</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ChatPromptTemplate</span><span class="o">.</span><span class="n">from_template</span><span class="p">(</span><span class="n">prompt_template</span><span class="p">,</span> <span class="n">template_format</span><span class="o">=</span><span class="s2">&quot;jinja2&quot;</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">log_to_database</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">app_config</span><span class="p">,</span> <span class="n">content_to_log</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">finish</span><span class="p">,</span> <span class="n">background_tasks</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This Python function logs content to a database using background tasks and handles KeyError</span>
<span class="sd">        exceptions.</span>

<span class="sd">        Args:</span>
<span class="sd">          app_config: The `app_config` parameter likely contains configuration settings for the application,</span>
<span class="sd">        such as database connection details, API keys, or other settings needed for logging to the database.</span>
<span class="sd">          content_to_log: The `content_to_log` parameter typically refers to the data or information that</span>
<span class="sd">        you want to log into the database. This could be any relevant information that you want to store for</span>
<span class="sd">        later analysis or reference. It could be a string, a dictionary, a list, or any other data structure</span>
<span class="sd">        that you find</span>
<span class="sd">          start: The `start` parameter in the `log_to_database` method likely represents the start time of</span>
<span class="sd">        the logging operation. It is used to indicate when the logging process began.</span>
<span class="sd">          finish: Finish is a parameter representing the time when the logging process finishes. It is used</span>
<span class="sd">        in the `log_to_database` method to log information to a database along with other parameters such as</span>
<span class="sd">        `app_config`, `content_to_log`, `start`, `background_tasks`, and an optional `label`.</span>
<span class="sd">          background_tasks: The `background_tasks` parameter in the `log_to_database` method seems to be an</span>
<span class="sd">        instance of some class that allows you to add tasks to be executed in the background. In this</span>
<span class="sd">        method, a task is added to write data to a database in the background using the `_write_to_db`</span>
<span class="sd">        method</span>
<span class="sd">          label: The `label` parameter in the `log_to_database` method is a string that can be used to</span>
<span class="sd">        provide additional information or context for the log entry being written to the database. It is an</span>
<span class="sd">        optional parameter with a default value of an empty string. If provided, the `label` will be</span>
<span class="sd">        included</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">background_tasks</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_db</span><span class="p">,</span>
                <span class="n">app_config</span><span class="p">,</span>
                <span class="n">content_to_log</span><span class="p">,</span>
                <span class="n">start</span><span class="p">,</span>
                <span class="n">finish</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_cost</span><span class="p">,</span>
                <span class="n">label</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
                <span class="s2">&quot;Failed writing to database. Check interface configuration and try again.&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="aiweb_common.WorkflowHandler.WorkflowHandler.log_to_database" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">log_to_database</span><span class="p">(</span><span class="n">app_config</span><span class="p">,</span> <span class="n">content_to_log</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">finish</span><span class="p">,</span> <span class="n">background_tasks</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>This Python function logs content to a database using background tasks and handles KeyError
exceptions.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>app_config</code></b>
              –
              <div class="doc-md-description">
                <p>The <code>app_config</code> parameter likely contains configuration settings for the application,</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p>such as database connection details, API keys, or other settings needed for logging to the database.
  content_to_log: The <code>content_to_log</code> parameter typically refers to the data or information that
you want to log into the database. This could be any relevant information that you want to store for
later analysis or reference. It could be a string, a dictionary, a list, or any other data structure
that you find
  start: The <code>start</code> parameter in the <code>log_to_database</code> method likely represents the start time of
the logging operation. It is used to indicate when the logging process began.
  finish: Finish is a parameter representing the time when the logging process finishes. It is used
in the <code>log_to_database</code> method to log information to a database along with other parameters such as
<code>app_config</code>, <code>content_to_log</code>, <code>start</code>, <code>background_tasks</code>, and an optional <code>label</code>.
  background_tasks: The <code>background_tasks</code> parameter in the <code>log_to_database</code> method seems to be an
instance of some class that allows you to add tasks to be executed in the background. In this
method, a task is added to write data to a database in the background using the <code>_write_to_db</code>
method
  label: The <code>label</code> parameter in the <code>log_to_database</code> method is a string that can be used to
provide additional information or context for the log entry being written to the database. It is an
optional parameter with a default value of an empty string. If provided, the <code>label</code> will be
included</p>


            <details class="quote">
              <summary>Source code in <code>llm_utils/aiweb_common/WorkflowHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">log_to_database</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">app_config</span><span class="p">,</span> <span class="n">content_to_log</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">finish</span><span class="p">,</span> <span class="n">background_tasks</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This Python function logs content to a database using background tasks and handles KeyError</span>
<span class="sd">    exceptions.</span>

<span class="sd">    Args:</span>
<span class="sd">      app_config: The `app_config` parameter likely contains configuration settings for the application,</span>
<span class="sd">    such as database connection details, API keys, or other settings needed for logging to the database.</span>
<span class="sd">      content_to_log: The `content_to_log` parameter typically refers to the data or information that</span>
<span class="sd">    you want to log into the database. This could be any relevant information that you want to store for</span>
<span class="sd">    later analysis or reference. It could be a string, a dictionary, a list, or any other data structure</span>
<span class="sd">    that you find</span>
<span class="sd">      start: The `start` parameter in the `log_to_database` method likely represents the start time of</span>
<span class="sd">    the logging operation. It is used to indicate when the logging process began.</span>
<span class="sd">      finish: Finish is a parameter representing the time when the logging process finishes. It is used</span>
<span class="sd">    in the `log_to_database` method to log information to a database along with other parameters such as</span>
<span class="sd">    `app_config`, `content_to_log`, `start`, `background_tasks`, and an optional `label`.</span>
<span class="sd">      background_tasks: The `background_tasks` parameter in the `log_to_database` method seems to be an</span>
<span class="sd">    instance of some class that allows you to add tasks to be executed in the background. In this</span>
<span class="sd">    method, a task is added to write data to a database in the background using the `_write_to_db`</span>
<span class="sd">    method</span>
<span class="sd">      label: The `label` parameter in the `log_to_database` method is a string that can be used to</span>
<span class="sd">    provide additional information or context for the log entry being written to the database. It is an</span>
<span class="sd">    optional parameter with a default value of an empty string. If provided, the `label` will be</span>
<span class="sd">    included</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">background_tasks</span><span class="o">.</span><span class="n">add_task</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_write_to_db</span><span class="p">,</span>
            <span class="n">app_config</span><span class="p">,</span>
            <span class="n">content_to_log</span><span class="p">,</span>
            <span class="n">start</span><span class="p">,</span>
            <span class="n">finish</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">total_cost</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span>
            <span class="s2">&quot;Failed writing to database. Check interface configuration and try again.&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="aiweb_common.WorkflowHandler.manage_sensitive" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">manage_sensitive</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>The <code>manage_sensitive</code> function retrieves sensitive information from different sources based on
deployment and development paths, as well as environment variables, and raises an error if the
secret is not found.</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Parameters:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              <b><code>name</code></b>
              –
              <div class="doc-md-description">
                <p>The <code>name</code> parameter in the <code>manage_sensitive</code> function is used to specify the name of the</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p>sensitive information or secret that the function is trying to retrieve. The function first checks
for the existence of the secret in a deployment path, then in a development path using glob, and
finally as an environment</p>


<table class="field-list">
  <colgroup>
    <col class="field-name" />
    <col class="field-body" />
  </colgroup>
  <tbody valign="top">
    <tr class="field">
      <th class="field-name">Returns:</th>
      <td class="field-body">
        <ul class="first simple">
            <li>
              –
              <div class="doc-md-description">
                <p>The <code>manage_sensitive</code> function is designed to manage sensitive information retrieval from</p>
              </div>
            </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>        <p>different sources. It first checks for the secret file in the deployment path, then in the
development path using glob, and finally as an environment variable. If the secret is found in any
of these sources, it is returned. If no secret is found, a <code>KeyError</code> is raised with a message
indicating that the secret with</p>


            <details class="quote">
              <summary>Source code in <code>llm_utils/aiweb_common/WorkflowHandler.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">manage_sensitive</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The `manage_sensitive` function retrieves sensitive information from different sources based on</span>
<span class="sd">    deployment and development paths, as well as environment variables, and raises an error if the</span>
<span class="sd">    secret is not found.</span>

<span class="sd">    Args:</span>
<span class="sd">      name: The `name` parameter in the `manage_sensitive` function is used to specify the name of the</span>
<span class="sd">    sensitive information or secret that the function is trying to retrieve. The function first checks</span>
<span class="sd">    for the existence of the secret in a deployment path, then in a development path using glob, and</span>
<span class="sd">    finally as an environment</span>

<span class="sd">    Returns:</span>
<span class="sd">      The `manage_sensitive` function is designed to manage sensitive information retrieval from</span>
<span class="sd">    different sources. It first checks for the secret file in the deployment path, then in the</span>
<span class="sd">    development path using glob, and finally as an environment variable. If the secret is found in any</span>
<span class="sd">    of these sources, it is returned. If no secret is found, a `KeyError` is raised with a message</span>
<span class="sd">    indicating that the secret with</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Check in deployment path</span>
    <span class="n">deploy_secret_fpath</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;/run/secrets/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">deploy_secret_fpath</span><span class="p">):</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">deploy_secret_fpath</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Check in development path using glob</span>
    <span class="n">develop_secret_paths</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/workspaces/*/secrets/</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">.txt&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">develop_secret_paths</span><span class="p">:</span>
        <span class="c1"># Assumes the first matching file is the correct one, adjust if necessary</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">develop_secret_paths</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">file</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">file</span><span class="o">.</span><span class="n">read</span><span class="p">()</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># Check environment variable last</span>
    <span class="n">v1</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">v1</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">v1</span>

    <span class="c1"># If no secret is found</span>
    <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Secret </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2"> not found&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="ObjectFactory.html" class="btn btn-neutral float-left" title="Object Factory"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="generate/AugmentedResponse.html" class="btn btn-neutral float-right" title="AugmentedResponse">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/uabperiopai" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="ObjectFactory.html" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="generate/AugmentedResponse.html" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
